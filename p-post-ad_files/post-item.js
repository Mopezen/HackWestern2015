Kj.Post=function(){"use strict";var a={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.defaults(),this.cache(),this.pluploader.init(),this.bindListeners(),this.opt.hasImages===!0&&this.populateImageStatus(),Kj.Forms.initUploadFile({"form":this.dom.$form,"matchingExtensions":this.matchingExtensions})},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.maxNumberOfImages,"required":!0,"typeofString":"number","name":"maxNumberOfImages"}),Kj.Utilities.verifyPassedArgs({"val":a.hasImages,"required":!0,"typeofString":"boolean","name":"hasImages"}),Kj.Utilities.verifyPassedArgs({"val":a.swfUrl,"required":!0,"typeofString":"string","name":"swfUrl"}),Kj.Utilities.verifyPassedArgs({"val":a.xapUrl,"required":!0,"typeofString":"string","name":"xapUrl"})},"defaults":function(){this.imageIndexNumber=0,this.matchingExtensions="jpg,jpeg,png,gif,bmp",this.images={},this.statuses={"added":plupload.QUEUED,"uploading":plupload.UPLOADING,"uploaded":plupload.DONE},this.resize={"width":800,"height":800},this.pluploader=new plupload.Uploader({"runtimes":"html5,flash,silverlight,html4","browse_button":"ImageUploadButton","container":"ImageUpload","multi_selection":!0,"url":Kj.extVars.imageUploader.ajaxImageUrl,"flash_swf_url":this.opt.swfUrl,"silverlight_xap_url":this.opt.xapUrl,"filters":{"max_file_size":"15mb","mime_types":[{"title":"Image files","extensions":this.matchingExtensions}]},"resize":{"width":this.resize.width,"height":this.resize.height,"quality":100}})},"cache":function(){this.dom={"$form":$("#PostAdMainForm"),"$imageUploadContainer":$("#ImageUpload"),"$uploadImageInput":$("#FileUploadInput"),"$uploadImageButton":$(".file-upload-button"),"$uploadedImagesContainer":$("#UploadedImages"),"$selectMainImageText":$(".image-select"),"$galleryImageIndexField":$("#GalleryImageIndexField"),"$errorMessageContainer":$("span[data-for=FileUploadInput]")}},"bindListeners":function(){var a=this;this.dom.$uploadedImagesContainer.on({"click":function(b){b.preventDefault(),a.removeUploadedImage($(this).parent())}},".remove"),this.dom.$uploadedImagesContainer.on({"click":function(b){b.preventDefault();var c=a.rotationOp.RIGHT;$(this).hasClass("rotate-left")&&(c=a.rotationOp.LEFT),a.rotateImage($(this).attr("data-target-id"),c,$(this).parent())}},".rotate"),this.dom.$uploadedImagesContainer.on({"click":function(b){b.preventDefault();var c=$(this).parent();a.selectImage(c.index())}},".container"),this.pluploader.bind("FilesAdded",function(b,c){plupload.each(c,function(c){c.getSource().isUpdate?a.handleImageUpdate(b,c):a.verifyUploadingImage(c)}),b.start()}),this.pluploader.bind("FileUploaded",function(b,c,d){a.checkUploadedStatus(c,d)}),this.pluploader.bind("Error",function(b,c){a.errorUploading(c.file,c)}),this.pluploader.bind("Init",function(b){a.isTransformSupported()||a.getLatestUploadedImageListItems().find(".rotate").hide()})},"rotationOp":{"LEFT":function(a,b,c){a.rotate(Math.PI/180*-90),a.translate(-c.width,0),Kj.Tracking.trackGAEvent({"action":"RotateImage","label":"index="+b+";dir=left;"})},"RIGHT":function(a,b,c){a.rotate(Math.PI/180*90),a.translate(0,-c.height),Kj.Tracking.trackGAEvent({"action":"RotateImage","label":"index="+b+";dir=right;"})}},"handleImageUpdate":function(a,b){var c=b.getSource().replacing;$('[data-image-id="'+c+'"]').replaceWith(this.renderUploadedImage(b,b.getSource().b64,!0)),this.addUploadingImage(b,!1)},"rotateImage":function(a,b,c){function d(a,b){var c=1;return a[b]>g.resize[b]&&(c=a[b]/g.resize[b],a.width/=c,a.height/=c),a}function e(){var a=document.createElement("canvas"),c=a.getContext("2d"),e={"width":this.width,"height":this.height};e=d(d(e,"width"),"height"),a.setAttribute("width",e.height),a.setAttribute("height",e.width),c.save(),b(c,j,e),c.drawImage(this,0,0,e.width,e.height),c.restore();var f=a.toDataURL("image/png"),i="rotated-"+h.name.replace(/(rotated-)?(.+)\.[a-z0-9]+/,"$2")+".png",k=new o.File(null,{"data":f,"name":i});g.replaceImage(h,k,f)}function f(a){var b=new Image;b.onload=function(){e.call(this)},b.src=a}var g=this,h=this.images[a],i=new mOxie.FileReader,j=0;void 0!==h&&("undefined"!=typeof c&&c.length>0&&(j=c.index()),i.onloadend=function(){f(i.result)},h instanceof plupload.File?h.getSource().isUpdate?f(h.getSource().b64):i.readAsDataURL(h.getSource()):f($('[data-image-id="'+h.id+'"] .image').attr("data-large-url")))},"replaceImage":function(a,b,c){b.isUpdate=!0,b.undo=a.id,b.replacing=a.id,void 0!==a.getSource&&null!==a.getSource()&&void 0!==a.getSource().undo&&a.status!==this.statuses.uploaded&&(b.undo=a.getSource().undo,b.replacing=a.id,this.removeImageFromStatus(a.id),this.pluploader.removeFile(a)),b.b64=c,this.pluploader.addFile(b)},"checkUploadedStatus":function(a,b){var c=this.parseResult(b),d=a.getSource();if("undefined"!=typeof c.status)switch(c.status){case"OK":d.isUpdate?this.addUpdatedImage(a,d,c):this.addUploadedImage(a,c);break;case"ERROR":this.errorUploading(a,c)}},"updateImage":function(a,b){return"undefined"==typeof this.images[a]&&(this.images[a]={}),this.images[a]=_.extend(this.images[a],b),this.images},"addImageFromFile":function(a){this.images[a.id]=a},"populateImageStatus":function(){var a,b=this.dom.$uploadedImagesContainer.find("li"),c=b.length,d=0;for(d;c>d;d++)a=b.eq(d),this.addImageFromFile({"id":this.getImageIdFromListItem(a),"name":"uploadedImage"+d,"status":this.statuses.uploaded,"result":this.getImageSrcFromListItem(a),"isRemote":!0});this.toggleUploadState()},"removeImageFromStatus":function(a){delete this.images[a]},"numberOfImages":function(){return _.size(this.images)},"addUploadingImage":function(a,b){if(b=void 0===b?!0:b,this.addImageFromFile(a),this.toggleUploadState(),this.showImageContainer(),b){var c=Kj.Utilities.useTemplate({"template":"uploadingImage","data":{"imageId":a.id,"imageName":a.name,"cancelText":Kj.extVars.imageUploader.cancelText}});this.dom.$uploadedImagesContainer.append(c)}},"renderUploadedImage":function(a,b,c){var d,e,f=!1;return c=void 0===c?!1:c,d=jQuery("#UploadedImages li").filter('[data-image-id="'+a.id+'"]').index(),-1===d&&a.getSource&&a.getSource().isUpdate&&(d=jQuery("#UploadedImages li").filter('[data-image-id="'+a.getSource().replacing+'"]').index()),d===this.imageIndexNumber&&(f=!0),this.removeErrorMessage(),this.updateImage(a.id,{"status":this.statuses.uploaded,"result":b}),e=Kj.Utilities.useTemplate({"template":"uploadedImage","data":{"imageId":a.id,"selected":f,"removeText":Kj.extVars.imageUploader.removeText,"imageUrl":b,"canTransform":this.isTransformSupported(a),"updating":c}})},"addUpdatedImage":function(a,b,c){$('[data-image-id="'+a.id+'"]').replaceWith(this.renderUploadedImage(a,c.normalUrl)),this.removeImageFromStatus(b.undo),this.replaceHiddenImageInput(b.undo,a.id)},"addUploadedImage":function(a,b){$('[data-image-id="'+a.id+'"]').replaceWith(this.renderUploadedImage(a,b.normalUrl)),this.createHiddenImageInput(a.id)},"renderHiddenImageInput":function(a){return $("<input>",{"type":"hidden","name":"images","value":this.images[a].result,"id":a+"-input"})},"replaceHiddenImageInput":function(a,b){$("#"+a+"-input").replaceWith(this.renderHiddenImageInput(b))},"createHiddenImageInput":function(a){this.renderHiddenImageInput(a).appendTo(this.dom.$imageUploadContainer)},"removeHiddenImageInput":function(a){$("#"+a+"-input").remove()},"removeUploadedImage":function(a){var b,c=this.getImageIdFromListItem(a),d=a.index();b=this.images[c],b.getSource&&b.getSource().replacing&&(this.removeHiddenImageInput(b.getSource().replacing),this.removeImageFromStatus(b.getSource().replacing),this.removeHiddenImageInput(b.getSource().undo),this.removeImageFromStatus(b.getSource().undo)),this.removeHiddenImageInput(c),this.removeImageFromStatus(c),b.status!==this.statuses.uploaded&&this.pluploader.removeFile(b),a.remove(),this.getNewSelectedImage(d),this.toggleUploadState(),0===this.numberOfImages()&&this.hideImageContainer(),Kj.Tracking.trackGAEvent({"action":"RemoveImage","label":"index="+d+";"})},"removeUploadingImage":function(a){$("#"+a).remove()},"getImageSrcFromListItem":function(a){return a.find("img").attr("src")},"getImageIdFromListItem":function(a){return a.attr("data-image-id")},"showImageContainer":function(){this.dom.$selectMainImageText.show(),this.dom.$uploadedImagesContainer.show()},"hideImageContainer":function(){this.dom.$selectMainImageText.hide(),this.dom.$uploadedImagesContainer.hide()},"selectImage":function(a){var b=this.getLatestUploadedImageListItems();this.updateImageIndexValue(a),b.removeClass("selected"),b.eq(a).addClass("selected")},"isInMaxImageRange":function(){return this.getImageStatusSize()<this.opt.maxNumberOfImages},"getNewSelectedImage":function(a){0===a&&0===this.imageIndexNumber?this.selectImage(0):a<=this.imageIndexNumber&&this.selectImage(this.imageIndexNumber-1)},"getLatestUploadedImageListItems":function(){return this.dom.$uploadedImagesContainer.find("li")},"updateImageIndexValue":function(a){this.imageIndexNumber=a,this.dom.$galleryImageIndexField.val(a)},"verifyUploadingImage":function(a){this.isImageValid(a)===!0?this.addUploadingImage(a):this.pluploader.removeFile(a)},"isImageValid":function(a){return this.isInMaxImageRange()===!0?!0:(this.throwError(Kj.extVars.validationMessages.uploadingImages.maxNumberReached),!1)},"errorUploading":function(a,b){var c=a.getSource(),d=$('[data-image-id="'+a.id+'"]');c.isUpdate?(d.replaceWith(scope.renderUploadedImage(scope.images[c.undo],scope.images[c.undo].result)),this.replaceHiddenImageInput(a.id,a.undo)):(d.remove(),this.removeHiddenImageInput(a.id)),this.removeImageFromStatus(a.id),this.toggleUploadState(),0===this.numberOfImages()&&this.hideImageContainer(),b.errmsg=void 0!==b.errmsg?b.errmsg:b.code,this.throwResponseError(b.errmsg)},"throwResponseError":function(a){switch(a){case"FILE_MAXSIZE_EXCEEDED":case-600:this.throwError(Kj.extVars.validationMessages.fileSize);break;case"FILE_RESOLUTION_EXCEEDED":this.throwError(Kj.extVars.validationMessages.uploadingImages.imageResolution);break;default:this.throwError(Kj.extVars.validationMessages.uploadingImages.failed)}},"throwError":function(a){Kj.Forms.initDisplayFormErrors({"form":this.dom.$form,"showInputMessages":!0,"showBoxMessages":!1,"fieldErrors":[{"field":this.dom.$uploadImageInput.attr("name"),"errmsg":a}]})},"removeErrorMessage":function(){this.dom.$uploadImageInput.removeClass("error"),this.dom.$errorMessageContainer.removeClass("error")},"getImageStatusSize":function(){return _.filter(this.images,function(a){return"undefined"==typeof a.getSource||!a.getSource().isUpdate||a.getSource().isUpdate&&a.status===plupload.DONE}).length},"parseResult":function(a){return jQuery.parseJSON(a.response)},"disableUpload":function(){this.pluploader.disableBrowse(!0),this.dom.$uploadImageButton.addClass("disabled")},"enableUpload":function(){this.pluploader.disableBrowse(!1),this.dom.$uploadImageButton.removeClass("disabled")},"toggleUploadState":function(){this.isInMaxImageRange()?this.enableUpload():this.disableUpload()},"isTransformSupported":function(a){var b=document.createElement("canvas"),c=!(!b.getContext||!b.getContext("2d")),d="flash"===this.pluploader.runtime||"silverlight"===this.pluploader.runtime,e=d||"undefined"!=typeof window.FileReader,f=!1;return void 0!==a&&(f=!!a.isRemote),c&&e&&!f}},b={"init":function(){this.defaults(),this.cache(),this.bindListeners()},"defaults":function(){},"cache":function(){this.dom={},this.dom.$field=$("#pstad-loctnid"),this.dom.$locationLevel0=$("#locationLevel0"),this.dom.$locationLevel1=$("#locationLevel1"),this.dom.$subLocationLabel=$("#SubLocationLabel")},"useSubArea":function(){this.dom.$field.val(this.dom.$locationLevel1.val())},"useLocation":function(){var a=Kj.api.SelectLocation.findLocationById(window.locationsTree,this.dom.$locationLevel0.val()),b=a.children;if(this.dom.$field.val(this.dom.$locationLevel0.val()),this.dom.$locationLevel1.children().remove(),0===b.length)this.dom.$locationLevel1.attr("disabled","disabled"),this.dom.$locationLevel1.removeAttr("req"),this.dom.$subLocationLabel.removeClass("add-asterisk");else{this.dom.$locationLevel1.removeAttr("disabled"),this.dom.$locationLevel1.attr("req","req"),this.dom.$subLocationLabel.addClass("add-asterisk"),this.dom.$locationLevel1.append('<option value="">----------</option>');for(var c=0;c<b.length;++c)this.dom.$locationLevel1.append('<option value="'+b[c].id+'">'+b[c].nameEn+"</option>")}},"bindListeners":function(){this.dom.$locationLevel0.change($.proxy(function(){this.useLocation()},this)),this.dom.$locationLevel1.change($.proxy(function(){this.useSubArea()},this))}},c={"init":function(){this.cache(),this.bindListeners()},"cache":function(){this.dom={"verifyEmailButton":$("#postad-contact-verifyEmailButton"),"changeEmailButton":$("#postad-contact-changeEmailButton"),"verifyEmailContainer":$("#postad-contact-verifyEmailContainer"),"verifyEmail":$("#postad-contact-verifyEmail"),"emailField":$("#pstad-email")}},"verifyEmailAddress":function(){this.dom.verifyEmail.val("true"),this.dom.verifyEmailContainer.hide()},"changeEmailAddress":function(){this.dom.verifyEmailContainer.hide(),this.dom.emailField.focus(),this.dom.emailField.addClass("error")},"bindListeners":function(){var a=this;this.dom.verifyEmailButton.on({"click":function(b){b.preventDefault(),a.verifyEmailAddress()}}),this.dom.changeEmailButton.on({"click":function(b){b.preventDefault(),a.changeEmailAddress()}})}},d={"init":function(a){this.cache(a),this.bindListeners(),this.disableModelField()},"cache":function(a){this.dom={"formFields":$("select.dependencyNode"),"categoryId":$("#categoryId").val(),"url":a.urlAjaxSelectAttribute,"carMake":$("#carmake_s"),"carModel":$("select[id*=model_s]")}},"bindListeners":function(){var a=this;a.dom.formFields.on({"change":function(b){var c=$(this).val();void 0!==c&&c!==!1&&""!==c?(a.dom.carModel.removeAttr("disabled"),a.sendRequest(b)):a.resetModelField()}})},"renderOptionList":function(a){var b=$("select[id*="+a[0].id+"]");b.children().remove();for(var c=[],d=a[0].items,e=0;e<d.length;e++){var f=d[e];c.push('<option value="'+f.id+'">'+f.value+"</option>")}if(b.append(c.join("")),this.dom.carMake.length>0){var g=this.dom.carMake.attr("data-model");void 0!==g&&g!==!1&&(this.dom.carModel.val(g),Kj.Post.api.VehicleAttributes.updateAdTitle())}},"sendRequest":function(a){for(var b=this,c=$(a.currentTarget).val(),d=$("select[id*="+a.currentTarget.id+"\\+]"),e=d.length,f=0;e>f;f++){var g=d.eq(f).attr("id").split("+");$.ajax({"url":this.dom.url,"data":{"categoryId":this.dom.categoryId,"rootAttribute":a.currentTarget.id,"attributeId":g[1],"optionPath":c},"success":function(a){b.renderOptionList(a)}})}},"disableModelField":function(){""===this.dom.carMake.val()&&this.resetModelField()},"resetModelField":function(){this.dom.carModel.empty().append('<option value="">'+Kj.extVars.selectOption+"</option>").attr("disabled","disabled")}},e={"init":function(a){this.cache(a),this.bindListeners()},"cache":function(a){this.dom={"form":$("#PostAdMainForm"),"previewButton":$("#PostAdPreview"),"previewUrl":a.previewUrl}},"submitForPreview":function(){Kj.Post.api.ValidateForm.setToPreviewAd(),this.dom.form.attr("action",this.dom.previewUrl),this.dom.form.submit()},"bindListeners":function(){var a=this;this.dom.previewButton.on({"click":function(b){b.preventDefault(),a.submitForPreview()}})}},f={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.cache(),this.defaults(),this.bindListeners(),this.hasErrorMessage()===!0&&this.trackPostAdFailWithMessage()},"cache":function(){this.dom={},this.dom.adId=document.getElementById("postad-id"),this.dom.$form=$("#PostAdMainForm"),this.dom.$formTextInputs=this.dom.$form.find("input,textarea"),this.dom.$allFormInputs=this.dom.$form.find("input,textarea,select"),this.dom.$priceSelectField=$("#priceType1"),this.dom.$priceField=$("#priceAmount"),this.dom.$formYoutube=$("#YoutubeURL"),this.dom.$websiteCheck=$("#PostWebsite"),this.dom.$websiteURL=$("#PostWebsiteURL"),this.dom.$dateFrom=$("#SelectDate"),this.dom.$dateTo=$("#SelectDateTo"),this.dom.$dateField=$(".date-field"),this.dom.$timeFrom=$("#TimeFrom"),this.dom.$timeTo=$("#TimeTo"),this.dom.$addressField=$("#pstad-map-address"),this.dom.$addressNumber=$("#addressStreetNumber"),this.dom.$addressName=$("#addressStreetName"),this.dom.$addressCity=$("#AddressCity"),this.dom.$addressPostal=$("#addressPostalCode"),this.dom.$addressProvince=$("#AddressProv"),this.dom.$postalCode=$("#PostalCode"),this.dom.$carProofSection=$('input[name="postAdForm.carproof"]'),this.dom.$carProofYes=$("#CarProofYes"),this.dom.$yesVIN=$("#YesVIN"),this.dom.$yesVINlabel=$("label[for=YesVIN]"),this.dom.$yesVINerror=$(".field-message[data-for=YesVIN]"),this.dom.$carProofHave=$("#CarProofHave"),this.dom.$haveVIN=$("#HaveVIN"),this.dom.$haveVINlabel=$("label[for=HaveVIN]"),this.dom.$haveVINerror=$(".field-message[data-for=HaveVIN]"),this.dom.$carProofURL=$("#CarProofURL"),this.dom.$carProofURLlabel=$("label[for=CarProofURL]"),this.dom.$carProofError=$(".field-message[data-for=CarProofURL]"),this.dom.$topVIN=$("#VINnumber"),this.dom.$carProofNo=$("#CarProofNo"),this.dom.$proFeature=$(".select-feature.professional-only"),this.dom.$eventsCategory=$(".date-range.events"),this.dom.$termsConditions=$("#PostAdConfirmationOfTerms"),this.dom.$messageContainer=$("#MessageContainer"),this.dom.$retrieveInfo=$("#RetrieveInfo"),this.dom.$VINexplodeClear=$("#VINexplodeClear"),this.dom.$submitAdButtons=$(".post-ad-button"),this.dom.$previewAdButton=$("#PostAdPreview"),this.dom.$emailField=$("#pstad-email"),this.dom.$latField=$("#pstad-lat"),this.dom.$lngField=$("#pstad-lng"),this.dom.$cityField=$("#pstad-city"),this.dom.$provinceField=$("#pstad-province")},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.isRealEstate,"required":!0,"typeofString":"boolean","name":"isRealEstate"}),Kj.Utilities.verifyPassedArgs({"val":a.isShoppingCart,"required":!0,"typeofString":"boolean","name":"isShoppingCart"}),Kj.Utilities.verifyPassedArgs({"val":a.errorMessage,"required":!0,"typeofString":"string","name":"errorMessage"}),Kj.Utilities.verifyPassedArgs({"val":a.duration,"required":!1,"typeofString":"number","name":"duration"})},"defaults":function(){this.inputRegEx={"dateFormat":/^[\d]{2}\/[\d]{2}\/[\d]{4}/,"vinFormat":/^[a-hj-npr-zA-HJ-NPR-Z\d]{12}\d{5}$/,"cleanValue":/[~!@$%^&*()+=_;:><|\{}\[\]\/]/gi,"carProofUrlFormat":/^http:\/\/reports\.carproof\.com\/main.+|^http:\/\/reports\.carproof\.net\/view_report\.aspx.+|^https:\/\/reports\.carproof\.com\/main.+|^https:\/\/reports\.carproof\.net\/view_report\.aspx.+/,"websiteUrl":/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(:\d+)?(\/[-a-z\d%_.~+]*)*(\?[/:;&a-z\d%_.~+=-]*)?(#[\?/:;&a-z\d%_.~+=-]*)?$/i,"postalCode":/^[ABCEGHJKLMNPRSTVXYabceghjklmnprstvxy]\d[ABCEGHJKLMNPRSTVWXYZabceghjklmnprstvwxyz][-\s]?\d[ABCEGHJKLMNPRSTVWXYZabceghjklmnprstvwxyz]\d$/,"spaceOrDash":/[-\s]/},this.errorMessages=[],this.beganForm=!1,this.addressValidated=!1,this.previewAd=!1,this.enabledSubmitButton=!0,this.initialAddressValue=this.dom.$addressField.val(),this.adId=this.dom.adId.value,this.postalCodeMaxLength=7},"bindListeners":function(){var a=this;this.dom.$form.on({"submit":function(b){return a.submitForm(b)}}),this.dom.$allFormInputs.on({"focus":function(){a.trackFormBegin()}})},"submitForm":function(a){this.clearTopVINerrors();var b=this.isAddressValidatorSubmit(a),c=this.isTrackingSubmit(a),d=!1;if(b===!0||c===!0||this.addressValidated===!0){if(c===!0)return d=this.isFormValid(),d&&(this.trackAddressChange(),this.persistEmail()),d;this.enabledSubmitButton===!0&&(this.previewAd===!0?this.trackPreviewAd():this.trackPostAdAttempt()),this.disableSubmitButton()}else this.validateAddress();return!1},"isFormValid":function(){this.errorMessages=[];var a=this.validatePrice(),b=this.validatePostalCode(),c=this.validateDates(this.dom.$dateField),d=this.validateTimes(),e=this.validateYoutube(),f=this.validateWebsite(),g=(this.validateVIN(),this.validateCarProof()),h=this.validateTC(),i=Kj.Forms.initValidateForm({"form":this.dom.$form,"showInputMessages":!0,"showBoxMessages":!1,"scrollToError":!1});return 0==$("label.error").length&&this.dom.$form.addClass("validated"),i===!0&&a===!0&&b===!0&&c===!0&&d===!0&&e===!0&&f===!0&&h===!0&&g===!0?(""===this.dom.$topVIN.val()&&(this.dom.$carProofYes.is(":checked")?this.dom.$topVIN.val(this.dom.$yesVIN.val()):this.dom.$carProofHave.is(":checked")&&this.dom.$topVIN.val(this.dom.$haveVIN.val())),this.checkGeoLocatedAddressChanged(),!0):(this.enableSubmitButton(),this.trackPostAdFail(),this.displayTCerrors(h),this.displayAllErrorMessages(),this.scrollToError(),this.previewAd=!1,!1)},"checkGeoLocatedAddressChanged":function(){var a=this.dom.$addressField.val(),b=this.dom.$postalCode.val(),c=$("#autoAddressField").val(),d=$("#autoPostalCodeField").val();c&&d&&(c!=a||d.replace(this.inputRegEx.spaceOrDash,"")!=b)&&Kj.Tracking.trackGAEvent({"action":"RedoAddress"})},"validatePrice":function(){var a=!0;if(0==this.dom.$priceSelectField.length)return a;if(this.dom.$priceSelectField.is(":checked")){var b=this.dom.$priceField.val();return""==b||"0"==b?(this.addToErrorMessages(this.dom.$priceField.attr("name"),Kj.extVars.validationMessages.req),a=!1):isNaN(b)&&(this.addToErrorMessages(this.dom.$priceField.attr("name"),Kj.extVars.validationMessages.number),a=!1),a}return a},"validateAddress":function(){this.opt.isRealEstate&&!Kj.extVars.isEdit&&this.populateAddress(),this.addressValidated=Kj.AddressValidator.api.AddressValidator.submitFormCallback()},"validatePostalCode":function(){if(!(this.dom.$postalCode.length>0))return!0;var a=this.dom.$postalCode.val();if(a.length>0){if(this.isValidPostalCode(a)===!0){if(this.dom.$postalCode.val().length==this.postalCodeMaxLength&&this.dom.$postalCode.val(this.dom.$postalCode.val().replace(this.inputRegEx.spaceOrDash,"")),this.dom.$addressField.data("use-postal")===!0){$.ajax({"url":"https://maps.googleapis.com/maps/api/geocode/json?address="+encodeURIComponent(this.dom.$postalCode.val()),"context":this,"async":!1}).done(function(a){"OK"===a.status&&(this.setCoordinates(a.results[0].geometry.location),this.setCityAndProvince(a.results[0].address_components))})}return!0}return this.addToErrorMessages(this.dom.$postalCode.attr("name"),Kj.extVars.validationMessages.errorPostalCode),!1}},"setCityAndProvince":function(a){var b,c,d="administrative_area_level_1",e="locality";for(b=0;b<a.length;b++)c=a[b],c.types[0]===d?this.dom.$provinceField.val(c.short_name):c.types[0]===e&&this.dom.$cityField.val(c.long_name)},"setCoordinates":function(a){this.dom.$latField.val(a.lat),this.dom.$lngField.val(a.lng)},"isValidPostalCode":function(a){a=a.trim();var b=new RegExp(this.inputRegEx.postalCode);return b.test(a)},"isTrackingSubmit":function(a){return void 0!==a.trackEvent&&a.trackEvent===!0},"isAddressValidatorSubmit":function(a){return void 0!==a.addressValidator&&a.addressValidator===!0},"isPaidAd":function(){return this.dom.$proFeature.is(":visible")},"hasErrorMessage":function(){return this.opt.errorMessage.length>0},"trackEventAction":function(a){var b="";return b=this.opt.isShoppingCart===!0?"AddAdToCart":this.previewAd===!0?"Preview":this.isPaidAd()===!0?Kj.extVars.tracking.pageActionTitle+"AdPaid":Kj.extVars.tracking.pageActionTitle+"AdFree",b+a},"trackFormBegin":function(){this.beganForm===!1&&this.opt.isShoppingCart===!0&&(Kj.Tracking.trackGAEvent({"action":this.trackEventAction("Begin")}),this.beganForm=!0)},"trackPostAdAttempt":function(){Kj.Tracking.trackGAEvent({"action":this.trackEventAction("Attempt"),"delayForm":this.dom.$form})},"trackPreviewAd":function(){Kj.Tracking.trackGAEvent({"action":Kj.extVars.tracking.pageActionTitle+"AdPreview","label":"btn=pst-ad-form;","delayForm":this.dom.$form})},"trackAddressChange":function(){Kj.extVars.isEdit&&this.dom.$addressField.val()!==this.initialAddressValue&&Kj.Tracking.trackGAEvent({"action":"UpdateAddress","label":"AdID="+this.adId+";"})},"trackPostAdFail":function(){Kj.Tracking.trackGAEvent({"action":this.trackEventAction("Fail")})},"trackPostAdFailWithMessage":function(){Kj.Tracking.trackGAEvent({"action":this.trackEventAction("Fail"),"label":"err="+this.opt.errorMessage+";"})},"enableSubmitButton":function(){this.enabledSubmitButton=!0,this.dom.$previewAdButton.addClass("secondary"),Kj.Forms.api.Button.enableButton(this.dom.$submitAdButtons)},"disableSubmitButton":function(){this.enabledSubmitButton=!1,this.dom.$previewAdButton.removeClass("secondary"),Kj.Forms.api.Button.disableButton(this.dom.$submitAdButtons)},"validateDates":function(a){var b=!0,c=!0;if(this.dom.$dateField.length)if(this.isDateRange()){if(this.dom.$dateFrom.attr("data-required")&&""==this.dom.$dateFrom.val()?(b=!1,this.addToErrorMessages(this.dom.$dateFrom.attr("name"),Kj.extVars.validationMessages.emptyCell)):""==this.dom.$dateFrom.val()||this.isDateValid(this.dom.$dateFrom.val())||(b=!1,this.addToErrorMessages(this.dom.$dateFrom.attr("name"),Kj.extVars.validationMessages.errorDate)),b&&(this.dom.$dateTo.attr("data-required")&&""==this.dom.$dateTo.val()?(c=!1,this.addToErrorMessages(this.dom.$dateTo.attr("name"),Kj.extVars.validationMessages.emptyCell)):""==this.dom.$dateTo.val()||this.isDateValid(this.dom.$dateTo.val())||(c=!1,this.addToErrorMessages(this.dom.$dateTo.attr("name"),Kj.extVars.validationMessages.errorDate)),this.opt.duration>0)){var d=this.dom.$dateFrom.val().split("/"),e=this.dom.$dateTo.val().split("/"),f=new Date(d[2],d[1]-1,d[0]),g=new Date(e[2],e[1]-1,e[0]);if(f.getDate()+this.opt.duration<g.getDate()){var h=Kj.extVars.validationMessages.maxDuration.replace("[X]",this.opt.duration);$("#SelectDateTo").addClass("error"),this.addToErrorMessages(this.dom.$dateTo.attr("name"),h),b=!1}}}else this.isDateValid(this.dom.$dateField.val())||(this.addToErrorMessages(this.dom.$dateField.attr("name"),Kj.extVars.validationMessages.errorDate),b=!1);return b&&c?!0:!1},"isDateValid":function(a){var b=!0;if(this.inputRegEx.dateFormat.test(a)){var c=a.split("/"),d=new Date(parseInt(c[2]),parseInt(c[1]-1),parseInt(c[0]));parseInt(c[1])!==d.getMonth()+1&&(b=!1)}else b=!1;return b},"isDateRange":function(){return this.dom.$dateFrom.length&&this.dom.$dateTo.length&&this.opt.duration>0},"validateTimes":function(){if(this.isDateRange()&&this.proceedWithTimeValidation()){var a,b,c=this.dom.$timeFrom.val().split(/:| /),d=this.dom.$timeTo.val().split(/:| /);if("PM"===c[2]&&"12"!==c[0]?c[0]=parseInt(c[0])+12:"AM"===c[2]&&"12"===c[0]&&(c[0]=parseInt(c[0])-12),"PM"===d[2]&&"12"!==d[0]?d[0]=parseInt(d[0])+12:"AM"===d[2]&&"12"===d[0]&&(d[0]=parseInt(d[0])-12),a=parseFloat(c[0]+"."+c[1]),b=parseFloat(d[0]+"."+d[1]),a>b)return $('label[for="SelectDate"]').addClass("error"),this.addToErrorMessages(this.dom.$timeTo.attr("name"),Kj.extVars.validationMessages.errorEventTime),!1}return!0},"proceedWithTimeValidation":function(){return this.dom.$timeFrom.length>0&&""!=this.dom.$timeFrom.val()&&""!=this.dom.$timeTo.val()&&""!=this.dom.$dateFrom.val()&&this.dom.$dateFrom.val()==this.dom.$dateTo.val()},"validateWebsite":function(){var a=this.dom.$websiteURL.val(),b=this.dom.$websiteURL.attr("name");return this.dom.$websiteCheck.prop("checked")?""!==a?this.isValidURL(a)?!0:(this.addToErrorMessages(b,Kj.extVars.validationMessages.errorWebsite),!1):void 0:!0},"isValidURL":function(a){var b=new RegExp(this.inputRegEx.websiteUrl);return b.test(a)},"validateYoutube":function(){if(this.dom.$formYoutube.removeClass("error"),this.dom.$formYoutube.next().removeClass("error"),0===this.dom.$formYoutube.length)return!0;if(""!=this.dom.$formYoutube.val()){var a=!0,b=this.dom.$formYoutube.val(),c="";if(b.indexOf("youtube.com")>=0)if(c=b.split("v=")[1],"undefined"!=typeof c){var d=c.indexOf("&");-1!=d&&(c=c.substring(0,d))}else a=!1;else b.indexOf("youtu.be")>=0?c=b.split("youtu.be/")[1]:a=!1;return""!=c&&"undefined"!=typeof c&&11==c.length?$.ajax({"url":"https://gdata.youtube.com/feeds/api/videos/"+c+"?alt=json","dataType":"jsonp","success":function(b){a=""!=b.entry.title.$t?!0:!1},"error":function(){a=!1}}):a=!1,0==a&&this.addToErrorMessages("postAdForm.youtubeVideoURL",Kj.extVars.validationMessages.errorYoutube),a}return!0},"populateAddress":function(){this.dom.$addressField.val(this.cleanValue(this.dom.$addressNumber.val())+" "+this.cleanValue(this.dom.$addressName.val())+", "+this.cleanValue(this.dom.$addressCity.val())+" "+this.cleanValue(this.dom.$addressPostal.val())+" "+this.dom.$addressProvince.val())},"cleanValue":function(a){return a.replace(this.inputRegEx.cleanValue,"")},"validateVIN":function(){this.dom.$topVIN.length>0&&""!=this.dom.$topVIN.val()&&!this.isValidVIN(this.dom.$topVIN.val())&&(this.addToErrorMessages(this.dom.$topVIN.attr("name"),Kj.extVars.validationMessages.errorVIN),this.clearTopVINerrors())},"validateCarProof":function(){var a=!0;return this.dom.$carProofSection.length?(this.dom.$carProofYes.is(":checked")?(""===this.dom.$yesVIN.val()?(this.addToErrorMessages(this.dom.$yesVIN.attr("name"),Kj.extVars.validationMessages.req),a=!1):this.isValidVIN(this.dom.$yesVIN.val())||(this.addToErrorMessages(this.dom.$yesVIN.attr("name"),Kj.extVars.validationMessages.errorVIN),a=!1),a&&!this.checkSameVIN(this.dom.$yesVIN)&&(a=!1)):this.dom.$carProofHave.is(":checked")&&(a=!0,""===this.dom.$haveVIN.val()||this.isValidVIN(this.dom.$haveVIN.val())||(this.addToErrorMessages(this.dom.$haveVIN.attr("name"),Kj.extVars.validationMessages.errorVIN),a=!1),a&&!this.checkSameVIN(this.dom.$haveVIN)&&(a=!1),""===this.dom.$carProofURL.val()?(this.addToErrorMessages(this.dom.$carProofURL.attr("name"),Kj.extVars.validationMessages.req),a=!1):this.isValidCarProofURL(this.dom.$carProofURL.val())||(this.addToErrorMessages(this.dom.$carProofURL.attr("name"),Kj.extVars.validationMessages.errorCarproofURL),a=!1)),Kj.extVars.isEdit&&this.dom.$carProofNo.is(":checked")&&(this.dom.$haveVIN.val(""),this.dom.$carProofURL.val("")),a):a},"isValidVIN":function(a){var b=new RegExp(this.inputRegEx.vinFormat);return b.test(a)},"isValidCarProofURL":function(a){var b=new RegExp(this.inputRegEx.carProofUrlFormat);return b.test(a)},"checkSameVIN":function(a){if(""!=this.dom.$topVIN.val()){if(this.dom.$topVIN.val()!=a.val()){var b=a.attr("id");return $("#"+b).removeClass("no-edit").removeAttr("disabled"),this.addToErrorMessages($("#"+b).attr("name"),Kj.extVars.validationMessages.errorVINmismatch),!1}return!0}return!0},"addToErrorMessages":function(a,b){this.errorMessages.push({"field":a,"errmsg":b})},"clearTopVINerrors":function(){Kj.Forms.initClearFormErrors({"form":this.dom.$form,"fieldErrors":[{"field":"postAdForm.attributeMap[vin_s]"}]})},"displayAllErrorMessages":function(){this.hasCustomErrorMessages()&&Kj.Forms.initDisplayFormErrors({"form":this.dom.$form,"showInputMessages":!0,"showBoxMessages":!1,"fieldErrors":this.errorMessages}),Kj.initMessages({"messageContainer":this.dom.$messageContainer,"setMessage":!0,"messageData":{"messageClass":"error","messageTextHeadline":Kj.extVars.validationMessages.postAdErrors},"scrollOnRender":!1})},"scrollToError":function(){Kj.Forms.api.ValidateForm.scrollToError()},"hasCustomErrorMessages":function(){return this.errorMessages.length>0?!0:!1},"displayTCerrors":function(a){this.clearTCerrors(),a===!1&&($(".tnc h3").addClass("error"),$("div[data-for=PostAdConfirmationOfTerms]").addClass("error"))},"clearTCerrors":function(){$(".tnc h3").removeClass("error"),$("div[data-for=PostAdConfirmationOfTerms]").removeClass("error")},"validateTC":function(){return this.dom.$termsConditions.length?this.dom.$termsConditions.prop("checked")?!0:!1:!0},"persistEmail":function(){var a=this.dom.$emailField.val();$.cookie("userEmail",a)}},g={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.cache(),this.bindListeners(),this.setIncludedPrices(),Kj.Tracking.initTrackFeaturePurchase({
"hasEnabledFeaturesCallback":Kj.Post.api.FeaturePricePicker.hasEnabledFeatures,"enabledFeatureNameCallback":Kj.Post.api.FeaturePricePicker.enabledFeatureName})},"cache":function(){this.dom={},this.dom.$categoryId=$("#categoryId").val(),this.dom.$selectFeatureRows=$(".select-feature"),this.dom.$selectFeatureOption=this.dom.$selectFeatureRows.find(".day-selector"),this.dom.$selectFeatureRow=this.dom.$selectFeatureOption.closest("tr"),this.dom.$priceCell=this.dom.$selectFeatureRow.find(".right .price"),this.dom.$featureToggle=$(".calculate-total"),this.dom.$urgentFeature=$("#UrgentInPromoteMyAds"),this.dom.$urgentTriggers=$("#UrgentInDetails, #UrgentInPromoteMyAds"),this.dom.$websiteFeature=$("#WebsiteInPromoteMyAds"),this.dom.$websiteTriggers=$("#PostWebsite, #WebsiteInPromoteMyAds"),this.dom.$websiteField=$("#PostWebsiteURL"),this.dom.$totalPrice=$("#TotalPrice"),this.dom.$locationLevel0=$("#locationLevel0"),this.dom.$locationLevel1=$("#locationLevel1"),this.dom.$promotionsTable=$(".promotions"),this.dom.$promotionsFeatureRows=this.dom.$promotionsTable.find(".select-feature:not(.professional-only, .carproof-feature)")},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.featureCatalogueUrl,"required":!0,"typeofString":"string","name":"featureCatalogueUrl"})},"bindListeners":function(){var a=this;this.dom.$featureToggle.on({"change":function(){a.toggleFeatures($(this))}}),this.dom.$locationLevel0.change($.proxy(function(){a.updatePricesFromServer(this.dom.$locationLevel0.val())},this)),this.dom.$locationLevel1.change($.proxy(function(){a.updatePricesFromServer(this.dom.$locationLevel1.val())},this))},"toggleFeatures":function(a){var b=a;if("select"===a.get(0).nodeName.toLowerCase())this.updateFeaturePrice(a);else{var c=a.attr("id");"UrgentInDetails"==c||"UrgentInPromoteMyAds"==c?(b=this.dom.$urgentTriggers,a.prop("checked")?this.dom.$urgentTriggers.prop("checked","checked"):this.dom.$urgentTriggers.prop("checked",""),"UrgentInDetails"==c?this.toggleIncludeInPrice(this.dom.$urgentFeature):this.toggleIncludeInPrice(a)):"PostWebsite"==c||"WebsiteInPromoteMyAds"==c?(b=this.dom.$websiteTriggers,a.prop("checked")?(this.dom.$websiteTriggers.prop("checked","checked"),this.dom.$websiteField.removeAttr("disabled").attr("req","req")):(this.dom.$websiteTriggers.prop("checked",""),this.dom.$websiteField.attr("disabled","disabled").removeAttr("req")),"PostWebsite"==c?this.toggleIncludeInPrice(this.dom.$websiteFeature):this.toggleIncludeInPrice(a)):this.toggleIncludeInPrice(a)}Kj.Tracking.api.TrackFeaturePurchase.trackFeatureClick(this.findFeatureName(b)),this.calculateTotal()},"hasEnabledFeatures":function(){return this.dom.$promotionsFeatureRows.find('input[type="checkbox"]:checked').length>0?!0:!1},"enabledFeatureName":function(){return this.findFeatureName(this.getFirstEnabledFeature())},"getFirstEnabledFeature":function(){return this.dom.$promotionsFeatureRows.find('input[type="checkbox"]:checked').eq(0)},"updateFeaturePrice":function(a){var b=a.prop("selectedIndex"),c=this.dom.$selectFeatureRow.attr("data-feature-name"),d=Kj.extVars.featurePricePicker[c],e=d[b],f=this.findFeaturePriceHiddenInput(this.dom.$selectFeatureRow);f.val(e[0]),this.dom.$priceCell.html(e[1]),this.toggleIncludeInPrice(a),this.calculateTotal()},"toggleIncludeInPrice":function(a){var b=a.closest(".select-feature").find("input:checkbox").is(":checked");a.closest(".select-feature").find(".counters").toggleClass("include-in-total",b),this.calculateTotal()},"calculateTotal":function(){var a=this,b=0;$(".include-in-total").each(function(){b+=parseFloat($(this).val())}),a.dom.$totalPrice.html(this.formatPrice(b.toFixed(2)))},"formatPrice":function(a){return $.formatNumber(a,{"format":"fr_CA"===Kj.extVars.locale?"#,##0.00 $":"$#,##0.00","locale":"fr_CA"===Kj.extVars.locale?"fr":"ca"})},"setIncludedPrices":function(){var a=0;$("input.calculate-total:checkbox:checked:visible").each(function(){a+=parseFloat($(this).parents(".select-feature").find(".counters").addClass("include-in-total"))}),this.calculateTotal()},"updatePricesFromServer":function(a){var b=this;$.ajax({"url":b.opt.featureCatalogueUrl,"data":{"categoryId":b.dom.$categoryId,"locationId":a},"success":function(a){b.updateFeatureNewPrices(a)}})},"updateFeatureNewPrices":function(a){var b=this;this.dom.$promotionsFeatureRows.each(function(){b.checkFeatureRowWithNewPrices($(this),a)}),this.calculateTotal()},"updateFeatureNewPrice":function(a,b){var c=this.findFeatureCheckBox(a),d=this.findFeaturePriceHiddenInput(a),e=this.findFeatureDaysColumn(a),f=this.findFeatureDaySelect(a),g=this.findFeatureTotal(a),h=this.getSelectedPrice(f,b.options),i=this.hasMultipleDurationSelection(f);if(c.attr("data-price",h.price),g.attr("data-price",h.price),g.html(this.formatPrice(h.price)),d.val(h.price),this.hasMultiplePrices(b.options)===!0){var j=Kj.Utilities.useTemplate({"template":"featureDurationOptions","data":{"buildOnlyOptions":i.toString(),"options":b.options,"selectedDuration":h.duration,"daysPhrase":Kj.extVars.featurePricePicker.daysPhrase}});i?f.html(j):e.html(j)}else e.html(h.duration+" "+Kj.extVars.featurePricePicker.daysPhrase)},"checkFeatureRowWithNewPrices":function(a,b){var c=this.getFeatureRowKey(a);this.isFeatureInArray(c,b)===!0?this.updateFeatureNewPrice(a,b[c]):(a.hide(),this.toggleIncludeInPrice(this.findFeatureCheckBox(a)))},"getSelectedPrice":function(a,b){return this.hasMultiplePrices(b)&&this.hasMultipleDurationSelection(a)?b[this.getFeatureSelectedDayIndex(a)]:b[0]},"isFeatureInArray":function(a,b){return"undefined"!=typeof b[a]?!0:!1},"findFeatureCheckBox":function(a){return a.find("input[type=checkbox].price")},"findFeaturePriceHiddenInput":function(a){return a.find(".counters")},"findFeatureTotal":function(a){return a.find(".right .price")},"findFeatureDaysColumn":function(a){return a.find(".days")},"findFeatureDaySelect":function(a){return a.find(".days select.day-selector")},"hasMultiplePrices":function(a){return a.length>1},"hasMultipleDurationSelection":function(a){return a.length>0},"getFeatureSelectedDayIndex":function(a){return a.prop("selectedIndex")},"getFeatureRowKey":function(a){return a.attr("data-feature-name")},"findFeatureName":function(a){return a.siblings(".feature-name").text()}},h={"init":function(){this.cache(),this.bindListeners()},"cache":function(){this.dom={},this.dom.$dateField=$(".date-field"),this.dom.$selectDate=$(".date-from"),this.dom.$selectDateTo=$(".date-to")},"bindListeners":function(){var a=this;this.dom.$dateField.datepicker({"buttonImage":Kj.extVars.datePicker.calendarIcon,"buttonImageOnly":!0,"dateFormat":"dd/mm/yy","dayNamesMin":Kj.extVars.datePicker.oneLetterDays,"defaultDate":new Date,"durationType":"slow","monthNames":Kj.extVars.datePicker.shortMonthNames,"prevText":"","nextText":"","showOn":"both","onClose":function(){a.isDateRange()&&a.updateDateRange($(this))}}),this.isDateRange()&&this.dom.$dateField.datepicker("option","minDate",new Date)},"isDateRange":function(){return 0!==$(".date-to").length},"updateDateRange":function(a){var b=a.attr("id"),c="",d="";""!=this.dom.$selectDate.val()&&""!=this.dom.$selectDateTo.val()&&(c=new Date(this.dom.$selectDate.val().substring(6,10),this.dom.$selectDate.val().substring(3,5)-1,this.dom.$selectDate.val().substring(0,2)),d=new Date(this.dom.$selectDateTo.val().substring(6,10),this.dom.$selectDateTo.val().substring(3,5)-1,this.dom.$selectDateTo.val().substring(0,2)),"SelectDateTo"==b?c>d&&(this.dom.$selectDate.datepicker("setDate",new Date(d)),this.clearTimeFields()):c>d&&(this.dom.$selectDateTo.datepicker("setDate",new Date(c)),this.clearTimeFields()))},"clearTimeFields":function(){$("#TimeFrom").val(""),$("#TimeTo").val("")}},i={"init":function(){this.defaults(),this.cache(),this.bindListeners()},"defaults":function(){this.vinExplosionBegin=!1},"cache":function(){this.dom={},this.dom.$form=$("#PostAdMainForm"),this.dom.$carProof=$(".car-proof"),this.dom.$carProofYes=$("#CarProofYes"),this.dom.$carProofHave=$("#CarProofHave"),this.dom.$carProofNo=$("#CarProofNo"),this.dom.$formSection=this.dom.$carProof.find("section"),this.dom.$sectionYes=this.dom.$formSection.filter(".yes-want"),this.dom.$sectionHave=this.dom.$formSection.filter(".yes-have"),this.dom.$carProofFeature=$('.select-feature[data-feature-name="Carproof"]'),this.dom.$carProofFeaturePrice=this.dom.$carProofFeature.find(".counters"),this.dom.$carProofFeatureInput=$("#CarProofFeature"),this.dom.$topVIN=$("#VINnumber"),this.dom.$yesVIN=$("#YesVIN"),this.dom.$haveVIN=$("#HaveVIN"),this.dom.$carProofURL=$("#CarProofURL"),this.dom.$retrieveInfo=$("#RetrieveInfo"),this.dom.$VINexplodeClear=$("#VINexplodeClear"),this.dom.$isVINexploded=$("#IsVINExploded"),this.dom.$VINexploded=$("#VINexploded"),this.dom.$multipleVIN=$("#MultipleVIN"),this.dom.$infoRetrieved=$("#InfoRetrieved"),this.dom.$carAttributes=$("#carmake_s, select[id*=model_s], #cartrim_s, #caryear_i, #carmileageinkms_i, #carbodytype_s, #cartransmission_s, #drivetrain_s, #carcolor_s, #carfueltype_s, #vehicletype_s, #postad-title"),this.dom.$carMake=$("#carmake_s"),this.dom.$carModel=$("select[id*=model_s]"),this.dom.$carTrim=$("#cartrim_s"),this.dom.$carYear=$("#caryear_i"),this.dom.$carBody=$("#carbodytype_s"),this.dom.$carTrans=$("#cartransmission_s"),this.dom.$carDrive=$("#drivetrain_s"),this.dom.$carFuel=$("#carfueltype_s"),this.dom.$vinChoices=$("#VINchoices")},"bindListeners":function(){var a=this;a.dom.$topVIN.on({"blur":function(){a.updatedVIN()},"focus":function(){a.trackVinExplosionBegin()}}),a.dom.$carProofYes.on({"change":function(){a.yesCarProof()}}),a.dom.$carProofHave.on({"change":function(){a.haveCarProof()}}),a.dom.$carProofNo.on({"change":function(){a.noCarProof()}}),a.dom.$carProofFeatureInput.on({"change":function(b){b.preventDefault(),a.toggleCarProofFeature($(this).prop("checked"))}}),a.dom.$retrieveInfo.on({"click":function(b){b.preventDefault(),a.validateTopVIN()}}),a.dom.$VINexplodeClear.on({"click":function(b){b.preventDefault(),$(this).hasClass("disabled")||(a.clearVINexplosion(),Kj.Post.api.VehicleAttributes.clearTitle(),Kj.Post.api.DependentAttributes.resetModelField(),$(this).addClass("disabled"),a.dom.$yesVIN.removeClass("no-edit").removeAttr("disabled").val(""),a.dom.$haveVIN.removeClass("no-edit").removeAttr("disabled"),Kj.extVars.isEdit||(a.dom.$haveVIN.val(""),a.dom.$carProofURL.val("")))}})},"updatedVIN":function(){""==this.dom.$topVIN.val()&&(this.dom.$topVIN.removeClass("valid-vin"),this.dom.$yesVIN.removeClass("no-edit").removeAttr("disabled"),this.dom.$haveVIN.removeClass("no-edit").removeAttr("disabled"))},"toggleCarProofFeature":function(a){this.dom.$formSection.removeClass("selected"),a===!0?(this.dom.$sectionYes.addClass("selected"),this.dom.$carProofYes.prop("checked",!0)):this.dom.$carProofNo.prop("checked",!0)},"yesCarProof":function(){this.dom.$topVIN.hasClass("valid-vin")&&this.dom.$yesVIN.val(this.dom.$topVIN.val()),this.dom.$formSection.removeClass("selected"),this.dom.$sectionYes.addClass("selected"),this.includeCarProofFeature()},"haveCarProof":function(){this.dom.$topVIN.hasClass("valid-vin")&&this.dom.$haveVIN.val(this.dom.$topVIN.val()),this.dom.$formSection.removeClass("selected"),this.dom.$sectionHave.addClass("selected"),this.excludeCarProofFeature()},"noCarProof":function(){this.dom.$formSection.removeClass("selected"),this.excludeCarProofFeature()},"includeCarProofFeature":function(){this.dom.$carProofFeatureInput.prop("checked",!0),this.dom.$carProofFeaturePrice.addClass("include-in-total"),Kj.Post.api.FeaturePricePicker.calculateTotal(),Kj.Tracking.api.TrackFeaturePurchase.trackFeatureClick("CarProof")},"excludeCarProofFeature":function(){this.dom.$carProofFeatureInput.prop("checked",!1),this.dom.$carProofFeaturePrice.removeClass("include-in-total"),Kj.Post.api.FeaturePricePicker.calculateTotal(),Kj.Tracking.api.TrackFeaturePurchase.trackFeatureClick("CarProof")},"trackVinExplosionBegin":function(){this.vinExplosionBegin===!1&&(this.trackVinExplosion("Begin"),this.vinExplosionBegin=!0)},"trackVinExplosion":function(a){Kj.Tracking.trackGAEvent({"action":"VINExplosion"+a})},"trackVinExplosionFailWithReason":function(a){Kj.Tracking.trackGAEvent({"action":"VINExplosionFail","label":"err="+a+";"})},"trackVinExplosionSuccessWithTrimLabel":function(a){Kj.Tracking.trackGAEvent({"action":"VINExplosionSuccess","label":"trim="+a+";"})},"validateTopVIN":function(){this.trackVinExplosionBegin(),this.trackVinExplosion("Attempt"),Kj.Post.api.ValidateForm.clearTopVINerrors(),""!=this.dom.$topVIN.val()?Kj.Post.api.ValidateForm.isValidVIN(this.dom.$topVIN.val())?(this.dom.$yesVIN.val(this.dom.$topVIN.val()).addClass("no-edit").attr("disabled","disabled"),this.dom.$haveVIN.val(this.dom.$topVIN.val()).addClass("no-edit").attr("disabled","disabled"),$("label[for=YesVIN], .field-message[data-for=YesVIN], label[for=HaveVIN], .field-message[data-for=HaveVIN]").removeClass("error"),this.dom.$topVIN.addClass("valid-vin"),this.dom.$topVIN.val(this.dom.$topVIN.val().toUpperCase()),this.dom.$VINexplodeClear.removeClass("disabled"),this.VINexplosion()):(this.trackVinExplosionFailWithReason("invalid-vin"),Kj.Forms.initDisplayFormErrors({"form":this.dom.$form,"showInputMessages":!0,"showBoxMessages":!1,"fieldErrors":[{"field":"postAdForm.attributeMap[vin_s]","errmsg":Kj.extVars.validationMessages.errorVIN}]})):(this.trackVinExplosionFailWithReason("empty-field"),Kj.Forms.initDisplayFormErrors({"form":this.dom.$form,"showInputMessages":!0,"showBoxMessages":!1,"fieldErrors":[{"field":"postAdForm.attributeMap[vin_s]","errmsg":Kj.extVars.validationMessages.emptyCell}]}))},"VINexplosion":function(){var a=this;a.dom.$vinChoices.unbind("change"),this.clearVINexplodedSection(),$.ajax({"url":"/p-automotive-description.json?vin="+this.dom.$topVIN.val(),"dataType":"json","success":function(b){a.VINExplosionSuccess(b)},"error":function(){a.VINExplosionError()}})},"VINExplosionSuccess":function(a){var b=this;if(a.trims.length<2)this.trackVinExplosionSuccessWithTrimLabel(!0),this.dom.$VINexploded.show(),this.dom.$infoRetrieved.show(),this.populateVINvalues(this.getSingleCarData(a,0));else{this.trackVinExplosionSuccessWithTrimLabel(!1),this.dom.$VINexploded.show(),this.dom.$multipleVIN.show();for(var c=0;c<a.trims.length;c++)this.dom.$vinChoices.append('<option value="'+c+'">'+a.trims[c].description+"</option>")}this.vinExplosionBegin=!1,this.dom.$isVINexploded.val(1),this.dom.$vinChoices.on({"change":function(){"-"!=b.dom.$vinChoices.find(":selected").val()?(b.populateVINvalues(b.getSingleCarData(a,b.dom.$vinChoices.find(":selected").val())),b.dom.$infoRetrieved.addClass("multiple").show()):b.dom.$carAttributes.val("")}})},"VINExplosionError":function(){this.trackVinExplosionFailWithReason("no-results"),this.dom.$isVINexploded.val(2),Kj.Forms.initDisplayFormErrors({"form":this.dom.$form,"showInputMessages":!0,"showBoxMessages":!1,"fieldErrors":[{"field":"postAdForm.attributeMap[vin_s]","errmsg":Kj.extVars.validationMessages.noResultsVIN}]})},"getSingleCarData":function(a,b){var c={"make":a.trims[b].make,"model":a.trims[b].model,"trim":a.trims[b].trim,"year":a.trims[b].year,"bodyType":a.trims[b].bodyType,"transmission":a.trims[b].transmission,"driveTrain":a.trims[b].driveTrain,"fuelType":a.trims[b].fuelType};return c},"populateVINvalues":function(a){this.dom.$carMake.val(a.make).attr("data-model",a.model).change(),this.dom.$carModel.val(a.model),this.dom.$carTrim.val(a.trim),this.dom.$carYear.val(a.year),this.dom.$carBody.val(a.bodyType),this.dom.$carTrans.val(a.transmission),this.dom.$carDrive.val(a.driveTrain),this.dom.$carFuel.val(a.fuelType)},"clearVINexplosion":function(){this.dom.$carAttributes.val(""),this.dom.$topVIN.val(""),this.clearVINexplodedSection(),this.trackVinExplosion("Cancel")},"clearVINexplodedSection":function(){this.dom.$vinChoices.empty().append('<option value="-">'+Kj.extVars.chooseTrim+"</option>"),this.dom.$multipleVIN.hide(),this.dom.$infoRetrieved.hide().removeClass("multiple"),this.dom.$VINexploded.hide()}},j={"init":function(){this.defaults(),this.cache(),this.bindListeners()},"defaults":function(){this.adTitle="",this.adDescription="",this.lineBreak="\n"},"cache":function(){this.dom={"$attributeFields":$("#caryear_i, #carmake_s, select[id*=model_s], #cartrim_s, #carbodytype_s"),"$attributeFieldsGroup":{"$yearField":$("#caryear_i"),"$makeField":$("#carmake_s"),"$modelField":$("select[id*=model_s]"),"$trimField":$("#cartrim_s"),"$bodyField":$("#carbodytype_s")},"$professionalOnly":$("li.professional-only"),"$forSaleByRadioButtons":$("input[id=forsaleby_s]"),"$titleField":$("#postad-title"),"$descriptionField":$("#pstad-descrptn"),"$extraOptions":$("#ExtraOptions input[type=checkbox]")}},"bindListeners":function(){var a=this;this.dom.$attributeFields.on({"change":function(){a.updateAdTitle()}}),this.dom.$forSaleByRadioButtons.on({"change":function(){a.toggleProfessionalOnly($(this).val())}}),this.dom.$extraOptions.on({"change":function(){a.updateAdDescription()}})},"toggleProfessionalOnly":function(a){"delr"===a?this.dom.$professionalOnly.show():this.dom.$professionalOnly.hide()},"updateAdTitle":function(){this.hasUserChangedAdTitle()===!1&&(this.adTitle=this.populateTitle(),this.dom.$titleField.val(this.adTitle))},"populateTitle":function(){var a="";for(var b in this.dom.$attributeFieldsGroup)this.isAttributeNotEmpty(this.dom.$attributeFieldsGroup[b])&&(a+=this.getAttributeText(this.dom.$attributeFieldsGroup[b])+" ");return $.trim(a)},"populateDescription":function(){var a=this,b=this.getAllCheckedExtraOptions(),c=Kj.extVars.vehicleOptions+this.lineBreak;return b.each(function(){a.isAttributeChecked($(this))&&(c+=$(this).val()+a.lineBreak)}),$.trim(c)},"isAttributeNotEmpty":function(a){return""!==$.trim(a.val())?!0:!1},"isAttributeChecked":function(a){return a.prop("checked")},"getAttributeText":function(a){return a.is("select")?$.trim(a.find("option:selected").text()):a.is("input")?$.trim(a.val()):""},"hasUserChangedAdTitle":function(){return this.adTitle===this.dom.$titleField.val()?!1:!0},"hasUserChangedAdDescription":function(){return this.adDescription===this.dom.$descriptionField.val()?!1:!0},"hasAnyCheckedExtraOptions":function(){var a=this.getAllCheckedExtraOptions();return a.length>0?!0:!1},"getAllCheckedExtraOptions":function(){return this.dom.$extraOptions.filter(":checked")},"updateAdDescription":function(){this.hasUserChangedAdDescription()===!1&&(this.getNewAdDescription(),this.dom.$descriptionField.val(this.adDescription))},"getNewAdDescription":function(){this.hasAnyCheckedExtraOptions()===!0?this.adDescription=this.populateDescription():this.adDescription=""},"clearTitle":function(){this.adTitle=""}},k={"init":function(){this.cache(),this.bindListeners()},"cache":function(){this.dom={"$categoryLinks":$(".category-link"),"$form":$(".select-category-form"),"$categoryInput":$("#selectCategoryForm-Category")}},"bindListeners":function(){var a=this;this.dom.$categoryLinks.on({"click":function(b){b.preventDefault(),a.updateForm($(this))}})},"updateForm":function(a){var b=this.getCategoryId(a);this.dom.$categoryInput.val(b),this.isALeafCategory(a)&&this.updateFormUrl(),this.dom.$form.submit()},"getCategoryId":function(a){return a.attr("data-cat-id")},"isALeafCategory":function(a){var b=a.attr("data-leaf");return"undefined"!=typeof b&&"true"===b?!0:!1},"updateFormUrl":function(){this.dom.$form.attr("action",Kj.extVars.SelectCategory.PostAdFormUrl)}},l={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.defaults(),this.cache(),this.bindListeners(),this.opt.hideInsertionFee&&this.hideInsertionFeeForPets()},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.hideInsertionFee,"required":!0,"typeofString":"boolean","name":"hideInsertionFee"}),Kj.Utilities.verifyPassedArgs({"val":a.categoryId,"required":!0,"typeofString":"number","name":"categoryId"})},"cache":function(){this.dom={"$insertionFeeCheckBox":$(".promotions .professional-only input[type=checkbox]"),"$forSaleByRadioButtons":$("input[id=forsaleby_s], input[id=forrentbyhousing_s], input[id=petofferedby_s], input[id=jobofferedby_s]"),"$insertionFeeRow":$(".promotions .professional-only")},this.dom.$adTypeOffer=$("#adType1"),this.dom.$adTypeWant=$("#adType2"),this.dom.$optShelter=$("#petofferedby_s[value=shelter]").parent(),this.dom.$optBreeder=$("#petofferedby_s[value=regbreeder]").parent(),this.dom.$optOwner=$("#petofferedby_s[value=owner]").parent(),this.dom.$optOwnerButton=$("#petofferedby_s[value=owner]"),this.dom.$ownerExample=this.dom.$optOwner.find(".example"),this.dom.$breederExample=this.dom.$optBreeder.find(".example"),this.dom.$shelterExample=this.dom.$optShelter.find(".example")},"defaults":function(){this.forSaleByValues={"charge":["owner","delr","reprofessional","regbreeder","jobs_professional"],"free":["ownr","realestagent","shelter","individual"]}},"bindListeners":function(){var a=this;this.dom.$forSaleByRadioButtons.on({"change":function(){a.toggleForSaleBy($(this).val())}}),this.dom.$adTypeOffer.on({"click":function(){a.toggleOfferedBy(!0)}}),this.dom.$adTypeWant.on({"click":function(){a.toggleOfferedBy(!1)}})},"hideInsertionFeeForPets":function(){126===this.opt.categoryId&&this.hideInsertionFee()},"toggleOfferedBy":function(a){if(126===this.opt.categoryId){var b=this.dom.$breederExample.text(),c=this.dom.$shelterExample.text();a?(this.dom.$optShelter.show(),this.dom.$optBreeder.show(),this.dom.$optOwnerButton.prop("checked",!1),this.dom.$ownerExample.text(function(){return b})):(this.dom.$optShelter.hide(),this.dom.$optBreeder.hide(),this.dom.$optOwnerButton.prop("checked",!0),this.dom.$ownerExample.text(function(){return c}),this.hideInsertionFee())}},"toggleForSaleBy":function(a){$.inArray(a,this.forSaleByValues.charge)>-1?this.showInsertionFee():$.inArray(a,this.forSaleByValues.free)>-1&&(this.opt.chargeInsertionFee||this.hideInsertionFee())},"showInsertionFee":function(){this.dom.$insertionFeeCheckBox.prop("checked",!0),Kj.Post.api.FeaturePricePicker.toggleIncludeInPrice(this.dom.$insertionFeeCheckBox),this.dom.$insertionFeeRow.show()},"hideInsertionFee":function(){this.dom.$insertionFeeCheckBox.prop("checked",!1),Kj.Post.api.FeaturePricePicker.toggleIncludeInPrice(this.dom.$insertionFeeCheckBox),this.dom.$insertionFeeRow.hide()}},m={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.defaults(),this.cache(),this.bindListeners(),this.trackAddedToCart()},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.hasInsertionFee,"required":!0,"typeofString":"boolean","name":"hasInsertionFee"})},"defaults":function(){this.addedToCart=Kj.Utilities.getUrlParam({"url":location.href,"paramName":"addToCart"})},"cache":function(){this.dom={"$form":$("#adForm")}},"bindListeners":function(){var a=this;this.dom.$form.on({"submit":function(b){return a.submitCheckOutForm(b)}})},"submitCheckOutForm":function(a){return this.isTrackingSubmit(a)?!0:(this.trackCheckOutEvent(),!1)},"trackCheckOutEvent":function(){Kj.Tracking.trackGAEvent({"action":"Checkout"}),Kj.Tracking.trackGAEvent({"action":Kj.extVars.tracking.pageActionTitle+"AdPaidAttempt","delayForm":this.dom.$form})},"isTrackingSubmit":function(a){return void 0!==a.trackEvent&&a.trackEvent===!0},"postAdAction":function(){return this.opt.hasInsertionFee===!0?Kj.extVars.tracking.pageActionTitle+"AdPaidAttempt":Kj.extVars.tracking.pageActionTitle+"AdFreeAttempt"},"trackAddedToCart":function(){"true"===this.addedToCart&&Kj.Tracking.trackGAEvent({"action":"AddAdToCartSuccess"})}},n={"init":function(){this.cache(),this.bindListeners(),(this.isAddressPresent()||Kj.extVars.isEdit===!0||"ie9"===$("html").attr("class")||!navigator.geolocation)&&this.hideQuestion(),this.isAddressPresent()&&this.setAddressValidity(!0)},"cache":function(){this.dom={"$form":$("#PostAdMainForm"),"$latField":$("#pstad-lat"),"$lngField":$("#pstad-lng"),"$Qyes":$("#Qyes"),"$Qno":$("#Qno"),"$AddressQuestion":$("#AddressQuestion"),"$AddressInfo":$("#AddressInfo"),"$locating":$("#Locating"),"$locatingLabel":$("#LocatingLabel"),"$postalCode":$("#PostalCode"),"$postalCodeLabel":$(".field-message[data-for=PostalCode]"),"$location":$("#pstad-map-address"),"$locationLabel":$(".field-message[data-for=pstad-map-address]")}},"bindListeners":function(){var a=this;this.dom.$Qno.on("click",function(){a.dom.$AddressQuestion.hide(),Kj.Tracking.trackGAEvent({"action":"GeolocateDenied"})}),this.dom.$Qyes.on("click",function(){Kj.Tracking.trackGAEvent({"action":"GeolocateBegin"}),a.dom.$AddressQuestion.hide(),a.dom.$locating.show(),a.dom.$locatingLabel.show();var b={"enableHighAccuracy":!0,"timeout":1e4};navigator.geolocation.getCurrentPosition(a.onSuccess.bind(a),a.onFail.bind(a),b)}),this.dom.$location.on({"keydown":function(a){13==a.keyCode&&a.preventDefault()},"change":function(){a.setAddressValidity(!1)}})},"hideQuestion":function(){this.dom.$Qno.click()},"isAddressPresent":function(){return this.dom.$location.val()},"setAddressValidity":function(a){this.dom.$location.attr("data-is-valid",a)},"onFail":function(){this.dom.$locating.hide(),this.dom.$locatingLabel.hide(),$("#LocatingMessage").show(),Kj.Tracking.trackGAEvent({"action":"GeolocateFail"})},"onSuccess":function(a){$.ajax({"url":"https://maps.googleapis.com/maps/api/geocode/json?latlng="+encodeURIComponent(a.coords.latitude)+","+encodeURIComponent(a.coords.longitude),"context":this}).done(function(a){this.dom.$locating.hide(),this.dom.$locatingLabel.hide(),Kj.Post.api.ValidateForm.setCoordinates(a.results[0].geometry.location),Kj.Post.api.ValidateForm.setCityAndProvince(a.results[0].address_components),$("#pstad-map-address").val(a.results[1].address_components[0].long_name).attr("data-is-valid",!0),$("#PostalCode").val(a.results[0].address_components[a.results[0].address_components.length-1].long_name),Kj.Tracking.trackGAEvent({"action":"GeolocateSuccess"}),this.storeGeoLocatedAddressAndPostalCode()})},"storeGeoLocatedAddressAndPostalCode":function(){var a=this.dom.$location.val(),b=this.dom.$postalCode.val(),c='<input type="hidden" id="autoAddressField" value="'+a+'">',d='<input type="hidden" id="autoPostalCodeField" value="'+b+'">';this.dom.$form.append(c),this.dom.$form.append(d)},"initAutocomplete":function(){var a=this,b=new google.maps.places.Autocomplete(document.getElementById("pstad-map-address"),{"types":["geocode"],"componentRestrictions":{"country":"CA"}});google.maps.event.addListener(b,"place_changed",function(){a.setAddressValidity(!0),a.dom.$postalCode.val(""),a.dom.$locationLabel.hide(),a.dom.$postalCode.removeClass("error"),a.dom.$postalCodeLabel.removeClass("error");var c=b.getPlace(),d=c.address_components[c.address_components.length-1].long_name;a.dom.$latField.val(c.geometry.location.lat()),a.dom.$lngField.val(c.geometry.location.lng()),Kj.Post.api.ValidateForm.setCityAndProvince(c.address_components),a.validPostalCode(d)?a.dom.$postalCode.val(d):$(".field-message[data-for=pstad-map-address]").text(Kj.extVars.validationMessages.vagueAddress).show()})},"validPostalCode":function(a){var b=!1;return/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]/.test(a)&&(b=!0),b}},p={"test":{"ImageUploader":a,"LocationTree":b,"Preview":e,"ValidateForm":f,"DatePicker":h,"FeaturePricePicker":g,"SelectCategory":k,"InsertionFee":l,"PostCarProof":i,"VehicleAttributes":j},"initImageUploader":function(b){a.init(b)},"initAddressValidator":function(a){Kj.AddressValidator.initAddressValidator(a)},"initLocationTree":function(){b.init()},"initEmailVerification":function(){c.init()},"initDependentAttributes":function(a){d.init(a)},"initModelField":function(){ModelField.init(opt)},"initPreview":function(a){e.init(a)},"initValidateForm":function(a){f.init(a)},"initDatePicker":function(){h.init()},"initFeaturePricePicker":function(a){g.init(a)},"initPostCarProof":function(a){i.init(a)},"initVehicleAttributes":function(){j.init()},"initSelectCategory":function(){k.init()},"initInsertionFee":function(a){l.init(a)},"initShoppingCart":function(a){m.init(a)},"initAutoAddress":function(){n.init()},"api":{"VehicleAttributes":{"updateAdTitle":function(){j.updateAdTitle()},"clearTitle":function(){j.clearTitle()}},"DependentAttributes":{"sendRequest":function(a,b){d.sendRequest(a,b)},"renderOptionList":function(){d.renderOptionList()},"resetModelField":function(){d.resetModelField()}},"ImageUploader":{"uploadImage":function(){a.uploadImage()}},"FeaturePricePicker":{"formatPrice":function(a){return g.formatPrice(a)},"calculateTotal":function(){g.calculateTotal()},"toggleIncludeInPrice":function(a){g.toggleIncludeInPrice(a)},"hasEnabledFeatures":function(){return g.hasEnabledFeatures()},"enabledFeatureName":function(){return g.enabledFeatureName()}},"ValidateForm":{"isValidVIN":function(a){return f.isValidVIN(a)},"clearTopVINerrors":function(){return f.clearTopVINerrors()},"setCityAndProvince":function(a){f.setCityAndProvince(a)},"setToPreviewAd":function(){f.previewAd=!0},"setCoordinates":function(a){return f.setCoordinates(a)}},"AutoAddress":{"initAutoComplete":function(){n.initAutocomplete()}}}};return p}();